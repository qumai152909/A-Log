https://tsejx.github.io/devops-guidebook/server/nginx/static-resource-server/ nginx book ğŸ“ğŸ“ğŸ“ğŸ“ğŸ“

[Apacheå’ŒNginxçš„åŒºåˆ«](https://www.cnblogs.com/wangzhipeng/p/7850717.html)

(https://help.aliyun.com/document_detail/97251.html?spm=5176.2020520101.help.dexternal.105e4df5i2715x) é˜¿é‡Œäº‘å®‰è£…nginxæ–‡æ¡£

https://blog.csdn.net/Kevinblant/article/details/103168451 æ–°æ‰‹ç¬¬ä¸€æ¬¡éƒ¨ç½²å‰ç«¯é¡¹ç›®åˆ°é˜¿é‡Œäº‘æœåŠ¡å™¨è¯¦ç»†æ­¥éª¤ï¼ˆCentOSç³»ç»Ÿï¼‰

 é˜¿é‡Œäº‘Centosç³»ç»Ÿä¸‹éƒ¨ç½²é™æ€å‰ç«¯é¡µé¢ https://m.tqwba.com/x_d/jishu/352693.html

# 0ï¼Œå‰è¨€

å‰ä¸¤å¤©è‡ªå·±ä¹°äº†ç™¾åº¦äº‘æœåŠ¡å™¨å’ŒåŸŸåï¼Œç„¶åå†™äº†ä¸€ä¸ªé™æ€çš„ç½‘é¡µï¼Œå‡†å¤‡æŠŠè¿™ä¸ªé™æ€çš„ç½‘é¡µæ”¾åˆ°æœåŠ¡å™¨ä¸Šå»ï¼Œè¿™æ ·çš„è¯ï¼Œä»»ä½•äººè¾“å…¥ç½‘å€ï¼Œéƒ½å¯ä»¥çœ‹åˆ°æˆ‘å†™çš„è¿™ä¸ªé™æ€ç½‘é¡µï¼›äºæ˜¯è¿™ä¸¤å¤©ä¸€ç›´åœ¨ç ”ç©¶è¿™ä¸œè¥¿è¦æ€ä¹ˆåšæ‰èƒ½å®ç°

ä»¥å‰æ²¡æ€ä¹ˆæ¥è§¦è¿‡æœåŠ¡å™¨çŸ¥è¯†ï¼Œå¯¹äºæœåŠ¡å™¨ï¼Œä»£ç†ï¼Œç«¯å£ï¼ŒNginx,XShellæ˜¯ä»€ä¹ˆä¸œä¸œï¼Œæ˜¯å¹²ä»€ä¹ˆçš„,å¯ä»¥è¯´å‡ ä¹æ²¡æœ‰è®¤è¯†

http://www.cxyzjd.com/article/Johnisjohn/78633305

**ä»€ä¹ˆæ˜¯æœåŠ¡å™¨?**

   ã€1ã€‘ å°±æ˜¯ä¸€å°ç”µè„‘ï¼Œè¿™å°ç”µè„‘çš„æ“ä½œç³»ç»Ÿä¸€èˆ¬æ˜¯Linux/Unixç³»ç»Ÿçš„

   ã€2ã€‘ æ­£å¦‚æˆ‘ä»¬çš„ä¸ªäººç”µè„‘è¦å®‰è£…ä¸€äº›è½¯ä»¶ä¸€æ ·ï¼ŒæœåŠ¡å™¨ç”µè„‘ä¹Ÿè¦å®‰è£…ä¸€äº›è½¯ä»¶ï¼Œæˆ‘ä»¬çš„ä¸ªäººç”µè„‘ä¸Š(æ¯”å¦‚win7)å¯ä»¥å®‰è£…mySQLæ•°æ®åº“ï¼Œåœ¨æœåŠ¡å™¨ç”µè„‘ä¸Šä¹Ÿå¯ä»¥å®‰è£…mySQLæ•°æ®åº“ï¼›åŒºåˆ«æ˜¯å•¥ï¼ŸåŒºåˆ«æ˜¯ï¼šç”¨win7å®‰è£…çš„è¯ï¼Œå¾ˆç›´è§‚å¾ˆçˆ½ï¼Œå°±æ˜¯é¼ æ ‡ç‚¹å‡»ç•Œé¢ï¼Œç‚¹ç‚¹ç‚¹ï¼Œå°±è¡Œäº†ï¼Œå®‰è£…è¿‡ç¨‹ä½ æ˜¯å…¨ç¨‹å‚ä¸æ“æ§çš„ï¼Œå¾ˆæ¸…æ¥šå¾ˆç›´è§‚ï¼›å¯æ˜¯ç”¨æœåŠ¡å™¨å®‰è£…çš„è¯ï¼Œå°±æœ‰å·®åˆ«äº†ï¼Œå°±è¦ç”¨å‘½ä»¤è¡Œäº†ï¼Œåœ¨ä¸€ä¸ªé»‘æ¡†æ¡†é‡Œé¢å»æ•²å‘½ä»¤ï¼Œè¿™äº›å‘½ä»¤å¾€å¾€å¾ˆç®€æ´ï¼Œä½†æ˜¯å¨åŠ›æ— ç©·ï¼Œå¥½åƒå­¤ç‹¬å¯‚å¯åˆèº«æ€€ç»æŠ€çš„è¶…ä¿—ä¾ å®¢ï¼Œé»‘æš—ä¹‹ä¸­å¿½è§åˆ€å…‰ä¸€é—ªï¼Œéœæ—¶é—´å¯¹æ–¹äººå¤´è½åœ°ï¼Œå¯è°“ç¤¾ä¼šæˆ‘Linux/Unixå“¥ï¼Œäººç‹ è¯ä¸å¤šã€‚

**äºŒã€æœåŠ¡å™¨å¹²å•¥çš„ï¼Ÿ**

   ã€1ã€‘å¥½æ¯”è¯´ä½ å†™å¥½äº†ä¸€ä¸ªå¾ˆç®€å•çš„é™æ€é¡µé¢test.html,å­˜åœ¨ä½ ä¸ªäººç”µè„‘çš„æ¡Œé¢ä¸Šï¼Œå¥½ï¼Œé‚£ä¹ˆä½ è¦æƒ³è®©æ‰€æœ‰çš„äººéƒ½çœ‹åˆ°ä½ çš„è¿™ä¸ªé¡µé¢ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Œè‚¯å®šè¦æŠŠè¿™ä¸ªtest.htmlè¿™é¡µé¢æ”¾åˆ°ä¸€ä¸ªå¤§å®¶éƒ½èƒ½çœ‹åˆ°çš„åœ°æ–¹ï¼Œå¦‚æœåªåœ¨ä½ çš„Dç›˜é‡Œå¾…ç€ï¼Œé‚£åˆ«äººæ°¸è¿œçœ‹ä¸åˆ°è¿™ä¸ªç½‘é¡µã€‚å¥½ï¼Œé‚£æŠŠè¿™ä¸ªtest.htmlæ”¾åˆ°å“ªé‡Œå¥½å‘¢ï¼Ÿä½ åœ¨æœé˜³åŒºï¼Œæˆ‘åœ¨æµ·æ·€åŒºï¼Œéš”å¾—æŒºè¿œï¼Œå¯æ˜¯ä¸€æŠ¬å¤´ï¼Œè±ï¼Œå¥½å®¶ä¼™ï¼Œéƒ½èƒ½çœ‹åˆ°ä¸€æœµä¸ƒå½©ç¥¥äº‘(é›¾éœ¾å¤©ä¸ç®—å“ˆ)ï¼Œå› ä¸ºä¸ƒå½©äº‘åœ¨å¤©ä¸Šï¼Œæ‰€ä»¥æˆ‘ä»¬éƒ½èƒ½çœ‹åˆ°å¥½ï¼Œå¥½äº†ï¼Œé‚£æˆ‘ä»¬å°±æŠŠtest.htmlè¿™ä¸ªé¡µé¢æ”¾åˆ°å¤©ä¸Šå»ã€‚æƒ³è±¡å¤©ä¸Šæœ‰ä¸€å°æœåŠ¡å™¨ç”µè„‘ã€‚æˆ‘ä»¬åªéœ€è¦æŠŠtest.htmlä¼ é€åˆ°å¤©ä¸Šçš„æœåŠ¡å™¨ç”µè„‘é‡Œçš„æŸä¸ªä½ç½®å°±å¯ä»¥äº†ï¼Œè¿™æ ·çš„è¯ï¼Œå› ä¸ºæœåŠ¡å™¨ç”µè„‘åœ¨å¤©ä¸Šï¼Œæ‰€ä»¥å¤§å®¶éƒ½èƒ½çœ‹åˆ°ï¼Œæƒ³è¦çœ‹test.htmlè¿™ä¸ªç•Œé¢çš„äººåªéœ€è¦ä»å¤©ä¸Šä¸‹è½½å°±å¯ä»¥äº†ã€‚å¤§æ¦‚å°±æ˜¯è¿™ä¹ˆä¸ªæ„æ€ï¼Œ*æœåŠ¡å™¨ç”µè„‘æ˜¯å­˜å‚¨è¿™ä¸ªé¡µé¢çš„åœºæ‰€*ã€‚

**ä¸‰ã€æ€ä¹ˆæ§åˆ¶æœåŠ¡å™¨ï¼Ÿ**

   ã€1ã€‘å¥½å®¶ä¼™ï¼ŒçœŸç‰›é€¼ï¼ŒæœåŠ¡å™¨éƒ½ä¸Šäº†å¤©äº†ï¼Œé‚£æˆ‘å¯æ€ä¹ˆæ§åˆ¶å•Š?å¤ªè¿œäº†å¤Ÿä¸ç€å•Šï¼Ÿæ²¡å…³ç³»ï¼Œæœ‰å¾ˆå¤šå·¥å…·ï¼Œæ¯”å¦‚è¯´*XShell*å§,è¿™æ˜¯ä¸€æ¬¾ç»ˆç«¯æ¨¡æ‹Ÿè½¯ä»¶ï¼Œä½ åªéœ€è¦ä¸‹è½½è¿™ä¸ªä¸œä¸œåˆ°è‡ªå·±çš„ä¸ªäººç”µè„‘ä¸Šï¼Œç„¶åè¾“å…¥æœåŠ¡å™¨ç”µè„‘çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå°±å¯ä»¥è¿æ¥åˆ°å¤©ä¸Šé‚£å°æœåŠ¡å™¨ç”µè„‘å¹¶ä¸”å®Œå…¨åœ°æ§åˆ¶å®ƒï¼Œè¿™æ ·ä½ å°±å¯ä»¥è¿œç¨‹æ§åˆ¶æœåŠ¡å™¨ç”µè„‘äº†ï¼Œè¿ç­¹å¸·å¹„ä¹‹ä¸­å†³èƒœåƒé‡Œä¹‹å¤–ï¼Œåä¸‡å†›ä¸­å–ä¸Šå°†é¦–çº§å¦‚æ¢å›Šå–ç‰©ï¼Œçš†å› ä½ ç”¨æœåŠ¡å™¨ç”µè„‘çš„ç”¨æˆ·åå’Œå¯†ç å–å¾—äº†å®ƒçš„æ§åˆ¶æƒï¼Œä»æ­¤å¤§æƒåœ¨æ¡å‚å¸˜å¬æ”¿åšå¹•åè€æ¿ä¸€å‘ä¸å¯æ”¶æ‹¾ï¼›

**å››ã€æœåŠ¡å™¨ç”µè„‘ä¸Šè¦å®‰è£…ä»€ä¹ˆï¼Ÿ**

*ã€1ã€‘è¦ç»™æœåŠ¡å™¨ç”µè„‘ï¼Œå®‰è£…Nginx, æ³¨æ„æ˜¯å®‰åˆ°æœåŠ¡å™¨ç”µè„‘ä¸Šå»å“¦ï¼Œè€Œä¸æ˜¯è‡ªå·±ä¸ªäººçš„ç”µè„‘å“¦ã€‚*

æ€ä¹ˆå®‰è£…nginxï¼Ÿç”¨XShellå°±å¯ä»¥æ§åˆ¶æœåŠ¡å™¨ç”µè„‘ï¼Œæ‰€ä»¥æˆ‘ä»¬ååœ¨å®¶é‡Œï¼Œé€šè¿‡XShellè¿™ä¸ªå·¥å…·ï¼Œæ¥ç»™å¤©ä¸Šçš„æœåŠ¡å™¨ç”µè„‘è£…è½¯ä»¶ï¼›

æ€ä¹ˆä½¿ç”¨XShellè‡ªå·±å»æŸ¥èµ„æ–™æœ‰å¾ˆå¤šï¼Œå¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯Ubuntuçš„ï¼Œé‚£ä¹ˆåœ¨XShellé‡Œé¢è¾“å…¥ apt-get install nginxå°±è¡Œäº†(å½“ç„¶è¿˜æœ‰å…¶ä»–çš„æ–¹æ³•),å¦‚æœä½ çš„æœåŠ¡å™¨æ˜¯CentOSçš„ï¼Œé‚£å°±ç”¨yum -xxx???å…·ä½“å‘½ä»¤å¿˜äº†ï¼Œè‡ªå·±æŸ¥èµ„æ–™å§ï¼Œæ³¨æ„ä¸€ä¸‹ï¼Œè‡ªå·±çš„ç³»ç»Ÿæ˜¯å“ªä¸€ç§ï¼ˆè™½ç„¶éƒ½å±äºLinuxç³»ç»Ÿè¿™ä¸ªç¥–å®—ï¼Œä½†æ˜¯Ubuntuå’ŒCentOSæ˜¯ä¸¤ä¸ªä¸ªæ€§æœ‰å·®åˆ«çš„åä»£ï¼‰ï¼Œæ³¨æ„åˆ«å†™é”™äº†å‘½ä»¤ï¼Œæ¯”å¦‚åœ¨ubuntué‡Œé¢æ•²yum ...å‡†å¤‡å»å®‰è£…è½¯ä»¶ï¼Œé‚£æµ·æ¯çŸ³çƒ‚ä¹Ÿä¸è¡Œï¼Œæ”¶æ‰‹å§ã€‚

*ã€2ã€‘åœ¨æœåŠ¡å™¨ç”µè„‘ä¸Šå®‰è£…å¥½Nginxä»¥åï¼Œéœ€è¦é…ç½®ä¸€ä¸‹ï¼Œä¹Ÿå°±æ˜¯ä¿®æ”¹æœ‰å…³Nginxçš„ä¸€äº›ä»£ç *

*ã€3ã€‘é…ç½®å¥½nginxä»¥åå¯èƒ½éœ€è¦å¯åŠ¨Nginxè¿™ä¸ªè½¯ä»¶*



# 1. é€‰æ‹©æœåŠ¡å™¨ç³»ç»Ÿ

é¦–å…ˆåˆšä¹°äº†æœåŠ¡å™¨ï¼Œéœ€è¦é€‰ç³»ç»Ÿï¼Œæˆ‘é€‰çš„æ˜¯CentOS 7.2çš„Linuxç³»ç»Ÿï¼ˆå¤§ç¥éƒ½æ˜¯ä½¿ç”¨çš„Linuxï¼Œæˆ‘ä¸æ˜¯å¤§ç¥ï¼Œå°±è·Ÿé£ä¸€ä¸‹ä¸‹ï¼‰ã€‚

ç‚¹å‡»è¿›å…¥æˆ‘çš„æ§åˆ¶å° > äº‘æœåŠ¡ > å®ä¾‹ > å¯ä»¥æŸ¥çœ‹åˆ°å½“å‰æœåŠ¡å™¨çŠ¶æ€åŠ**å…¬ç½‘IPï¼ˆè¿™ä¸ªå°±æ˜¯ä½ çš„æœåŠ¡å™¨å¯¹å¤–çš„IPåœ°å€äº†ï¼‰ã€‚**

([å…³äºå…¬ç½‘IPå’Œç§æœ‰IPçš„åŒºåˆ«](https://blog.csdn.net/ran_Max/article/details/81177069)) 

å…¬ç½‘ipï¼š120.27.215.50

# 2. é…ç½®å®‰å…¨ç»„

éœ€è¦é…ç½®ä¸€ä¸‹å®‰å…¨ç»„ï¼Œå¦åˆ™åˆ°æ—¶å€™ä½¿ç”¨å…¬ç½‘IPè®¿é—®çš„æ—¶å€™ï¼Œä¼šå‡ºç°è®¿é—®ä¸åˆ°çš„æƒ…å†µã€‚
å®‰å…¨ç»„ > åˆ›å»ºå®‰å…¨ç»„

é…ç½®å®Œåˆ—è¡¨ï¼Œå¿…é¡»è¦æœ‰80ã€22ç«¯å£

# 3, è®¾ç½®æœåŠ¡å™¨å¯†ç 

è¦è¿œç¨‹è¿æ¥åˆ°ä½ çš„é˜¿é‡Œäº‘æœåŠ¡å™¨ï¼Œéœ€è¦å…ˆä¿®æ”¹userçš„ç™»å½•å¯†ç ï¼šè¿›å…¥å®ä¾‹ > ç®¡ç† > é‡ç½®å®ä¾‹å¯†ç ä¸ºSYY152909.

ä¿®æ”¹åä¸€å®šè¦é‡å¯æœåŠ¡å™¨ï¼›

ç”¨æˆ·åï¼šrootï¼› å¯†ç ï¼šSYY152909.

# 4, ä½¿ç”¨å¯†ç è¿›è¡Œ SSH è¿æ¥

~~~
ssh root@120.27.215.50 -p 22
~~~

<img src="../imgs/ssh-root.png" alt="ssh-root" style="zoom:40%;" />



## æ‰§è¡Œç®€å•çš„å‘½ä»¤

~~~bash
df -h  # æŸ¥çœ‹æŸå°ä¸»æœºä¸Šçš„ç£ç›˜ä½¿ç”¨æƒ…å†µ

systemctl status firewalld # æŸ¥çœ‹é˜²ç«å¢™çŠ¶æ€
systemctl stop firewalld # ä¸´æ—¶å…³é—­é˜²ç«å¢™
systemctl disable firewalld # æ°¸ä¹…å…³é—­é˜²ç«å¢™
 
~~~

# 5, å®‰è£…Nginx

**ä¸ºä»€ä¹ˆéœ€è¦å®‰è£…nginxï¼Ÿ**

æœåŠ¡å™¨å·²ç»è¿æ¥äº†ï¼Œä½†æ˜¯ç°åœ¨æœåŠ¡å™¨ä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œç°åœ¨æƒ³è¦å¾€æœåŠ¡å™¨ä¸Šé¢æ”¾é™æ€èµ„æºï¼Œåƒhtmlç­‰ç­‰ï¼Œéœ€è¦å®‰è£…é™æ€èµ„æºæœåŠ¡å™¨ï¼Œæœ‰Apacheå’ŒNginxã€‚

ç°åœ¨ä½ çš„æœåŠ¡å™¨å¯ä»¥è¢«è®¿é—®äº†ï¼Œä½†æ˜¯ä½ æƒ³è®¿é—®æœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶ï¼Œè¿˜éœ€è¦å®‰è£…ã€é…ç½®NginxæœåŠ¡å™¨ã€‚



***

1. è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œå®‰è£…Nginxã€‚

   ```bash
   yum -y install nginx
   ```

2, è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼ŒæŸ¥çœ‹Nginxç‰ˆæœ¬ã€‚

```bash
nginx -v # è¿”å›ç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼Œè¡¨ç¤ºNginxå®‰è£…æˆåŠŸ
```

# 6ï¼Œé…ç½®Nginx

*1ï¼Œ å¤‡ä»½nginxçš„é»˜è®¤é…ç½®æ–‡ä»¶ã€‚*

```bash
cat /etc/nginx/nginx.conf # æŸ¥çœ‹æ–‡ä»¶å†…å®¹: $ cat filename

cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.bak # å¤‡ä»½ï¼›# cpï¼ˆcopy fileï¼‰å‘½ä»¤ä¸»è¦ç”¨äºå¤åˆ¶æ–‡ä»¶æˆ–ç›®å½•
```

*2ï¼Œä¿®æ”¹Nginxé…ç½®æ–‡ä»¶*

â€‹	2.1: æ‰“å¼€Nginxé…ç½®æ–‡ä»¶

~~~bash
vim /etc/nginx/nginx.conf # æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ vim filename

# vim /etc/nginx/conf.d/extra.conf
~~~

â€‹	2.2: æŒ‰iè¿›å…¥ç¼–è¾‘æ¨¡å¼

â€‹	2.3: åœ¨`server`å¤§æ‹¬å·å†…ï¼Œä¿®æ”¹æˆ–æ·»åŠ ä¸‹åˆ—é…ç½®ä¿¡æ¯ï¼š

~~~nginx
 				#é™¤ä¸‹é¢æåŠçš„éœ€è¦æ·»åŠ çš„é…ç½®ä¿¡æ¯å¤–ï¼Œå…¶ä»–é…ç½®ä¿æŒé»˜è®¤å€¼å³å¯ã€‚
        #å°†location / å¤§æ‹¬å·å†…çš„ä¿¡æ¯ä¿®æ”¹ä¸ºä»¥ä¸‹æ‰€ç¤ºï¼Œé…ç½®ç½‘ç«™è¢«è®¿é—®æ—¶çš„é»˜è®¤é¦–é¡µã€‚
        location / {
            index index.html index.htm;
        }
~~~

â€‹	2.4: æŒ‰ä¸‹Escé”®åï¼Œè¾“å…¥:wqå¹¶å›è½¦ä»¥ä¿å­˜å¹¶å…³é—­é…ç½®æ–‡ä»¶ã€‚

*3ï¼Œå¯åŠ¨NginxæœåŠ¡*

~~~
systemctl start nginx 
~~~

*4, è®¾ç½®NginxæœåŠ¡å¼€æœºè‡ªå¯åŠ¨*

~~~
systemctl enable nginx
~~~

*5, åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ç½‘å€*

åœ¨æµè§ˆå™¨ä¸­è®¿é—®http://120.27.215.50/ï¼Œ å¯ä»¥çœ‹åˆ°è¿™æ ·ä¸€ä¸ªé¡µé¢ï¼šâ€œWelcome to **nginx** on Red Hat Enterprise Linux!â€

è¿™æ˜¯nginxé»˜è®¤çš„é¦–é¡µï¼Œé»˜è®¤è·¯å¾„æ˜¯/usr/share/nginx/html/index.htmlï¼›å¦‚æœè¦è®¿é—®è‡ªå·±çš„é™æ€é¡µé¢ï¼Œéœ€è¦è‡ªå·±åœ¨æœåŠ¡å™¨æ–°å»ºé¡µé¢æˆ–è€…ä¸Šä¼ é¡µé¢ï¼›(åŸå§‹é»˜è®¤ï¼šroot         /usr/share/nginx/html;)

# 7, é…ç½®é™æ€æ–‡ä»¶

*1ï¼Œ åˆ›å»ºé™æ€ç½‘ç«™æ ¹ç›®å½•: /webAppï¼Œå’Œé»˜è®¤index.htmlï¼Œ 404.htmlæ–‡ä»¶ï¼š*

~~~bash
cd /
mkdir webApp  # mkdir æ–°å»ºç›®å½•
cd webApp

touch index.html # æ–°å»ºæ–‡ä»¶
touch 404.html
~~~

*2ï¼Œç¼–è¾‘index.htmlï¼Œ 404.htmlæ–‡ä»¶å†…å®¹ï¼š*

~~~bash
vim index.html # æ‰“å¼€index.htmlæ–‡ä»¶ï¼ŒæŒ‰iè¿›å…¥ç¼–è¾‘çŠ¶æ€ï¼Œè¾“å…¥ä¸‹é¢å†…å®¹ï¼š
~~~

~~~html
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>index.html</title>
</head>
<body>

<p>æœåŠ¡å™¨ä¸Šï¼Œè¯¥é¡µé¢çš„è·¯å¾„ï¼š</p>
<p>/webApp/index.html</p>

</body>
</html>

~~~

404.htmlæ–‡ä»¶åŒä¸Šã€‚

*3ï¼Œå»ºç«‹å…¶ä»–ç›®å½•å’Œæ–‡ä»¶ï¼š*

~~~bash
cd webApp
mkdir js
mkdir css

cd js
touch a.html
vim a.html

cd css
touch b.html
vim b.html
~~~

**æœ€ç»ˆç›®å½•ç»“æ„å¦‚ä¸‹ï¼š**

~~~
/webApp/
		index.html
		redirect.html
		
		js/
			a.html
			index.html
			app.js
			
	  css/
    	b.html
    	app.css
~~~

*4ï¼Œä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼š*

+ 4.1 ä¿®æ”¹nginxçš„é»˜è®¤é…ç½®æ–‡ä»¶/etc/nginx/nginx.confï¼Œ

  + å°†å…¶ä¸­çš„serveræ¸…ç©º;
  + æ”¾å¼€httpä¸­çš„includeå­—æ®µï¼Œå¹¶ä¿®æ”¹ä¸ºï¼šinclude /etc/nginx/conf.d/extra.conf

+ 4.2 æ·»åŠ å¹¶ä¿®æ”¹/etc/nginx/conf.d/extra.confæ–‡ä»¶:

  ~~~bash
  vim /etc/nginx/conf.d/extra.conf
  ~~~

  å†…å®¹ä¸ºï¼š

```nginx
    server {
        listen       80 default_server;
        server_name  _;
        root         /webApp;

        access_log               /webApp/access.log main;
        error_log                /webApp/error.log warn;

        location / {
            index index.html index.htm;
            try_files $uri $uri/ /redirect.html?$query_string;
        }

        #error_page 404 /404.html;
    }
```
ï¼ˆä¿®æ”¹åï¼Œå¯èƒ½éœ€è¦é‡æ–°å¯åŠ¨nginxï¼‰

+ 4.3 è®¿é—®ç»“æœå¦‚ä¸‹ï¼š

  + è®¿é—®ï¼šhttp://120.27.215.50/ ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/index.html
  + è®¿é—®ï¼šhttp://120.27.215.50/haha/ ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/redirect.html
  + è®¿é—®ï¼šhttp://120.27.215.50/haha ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/redirect.html
    +  (æ— 301 Moved Permanently)ï¼ˆæµè§ˆå™¨åœ°å€æ çš„åœ°å€ä¸å˜ï¼‰
  + è®¿é—®ï¼šhttp://120.27.215.50/js/ ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/js/index.html
  + **è®¿é—®**ï¼šhttp://120.27.215.50/js  ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/js/index.html
    + ï¼ˆæ§åˆ¶å°ï¼š2ä¸ªè¯·æ±‚ï¼‰ï¼ˆç¬¬ä¸€ä¸ªè¯·æ±‚ï¼š301 Moved Permanentlyï¼Œ Location: http://120.27.215.50/js/ï¼‰
    + æµè§ˆå™¨åœ°å€æ çš„urlæ”¹å˜ï¼šæœ€ç»ˆå˜ä¸ºhttp://120.27.215.50/js/

  + è®¿é—®ï¼šhttp://120.27.215.50/js/app.jsï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/js/app.js
  + è®¿é—®ï¼šhttp://120.27.215.50/js/app.js/ ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/redirect.html
  + è®¿é—®ï¼šhttp://120.27.215.50/js/a.htmlï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/js/a.html
  + è®¿é—®ï¼šhttp://120.27.215.50/js/a.html/ ï¼›æœ€ç»ˆè¿”å›ï¼š /webApp/redirect.html
  + è®¿é—®ï¼šhttp://120.27.215.50/css/ ï¼›æœ€ç»ˆè¿”å›ï¼š403 Forbidden
  + è®¿é—®ï¼šhttp://120.27.215.50/css ï¼›æœ€ç»ˆè¿”å›ï¼š403 Forbidden
    + ï¼ˆæ§åˆ¶å°ï¼š2ä¸ªè¯·æ±‚ï¼‰ï¼ˆç¬¬ä¸€ä¸ªè¯·æ±‚ï¼š301 Moved Permanentlyï¼Œ Location: http://120.27.215.50/css/ï¼‰
    + æµè§ˆå™¨åœ°å€æ çš„urlæ”¹å˜ï¼šæœ€ç»ˆå˜ä¸ºhttp://120.27.215.50/css/

  + è®¿é—®ï¼šhttp://120.27.215.50/css/b.htmlï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/css/b.html
  + è®¿é—®ï¼šhttp://120.27.215.50/css/app.cssï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/css/app.css
  + è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/ ï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/redirect.html
  + è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/BomList ï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/redirect.html
    + ï¼ˆæµè§ˆå™¨åœ°å€æ çš„åœ°å€ä¸å˜ï¼‰ï¼ˆæ— 301 Moved Permanentlyï¼‰ï¼ˆ1ä¸ªè¯·æ±‚ï¼‰
  + è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/css/ï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/redirect.html
  + è®¿é—®:  http://120.27.215.50/scc/imp/css/app.cssï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/redirect.html
  + è®¿é—®: http://120.27.215.50/scc/imp/js/app.js ï¼›æœ€ç»ˆè¿”å›ï¼š/webApp/redirect.html



### å°æ€»ç»“ï¼šç»“å°¾æ–œæ 

æœ‰æ–œæ ï¼šä»£è¡¨ç›®å½•ï¼›æ— æ–œæ ï¼šä»£è¡¨æ–‡ä»¶ï¼›

**é—®ä»€ä¹ˆæœ‰çš„æ— æ–œæ ï¼Œä¼šå¼•èµ·301ï¼Œæœ‰çš„ä¸ä¼šå¼•èµ·301ï¼Ÿ**

ä¾‹å¦‚ï¼Œç°åœ¨è®¿é—®ä¸¤ä¸ªç›®å½•ï¼šAAï¼Œ BBï¼Œå…¶ä¸­ï¼ŒæœåŠ¡å™¨ä¸­çœŸçš„å­˜åœ¨ç›®å½•AAï¼›è€Œç›®å½•BBä¸å­˜åœ¨æœåŠ¡å™¨ä¸Šï¼Œçå†™çš„ï¼Œè®¿é—®ä¸‹é¢åœ°å€ï¼š

http://123.22.22.10/AA/ : ä¸ä¼š301ï¼Œ æ§åˆ¶å°1ä¸ªè¯·æ±‚ï¼Œæµè§ˆå™¨åœ°å€æ çš„åœ°å€ä¸å˜

http://123.22.22.10/AA : ä¼š301ï¼Œ æ§åˆ¶å°2ä¸ªè¯·æ±‚ï¼Œæµè§ˆå™¨åœ°å€æ çš„åœ°å€æ”¹å˜ï¼Œå˜ä¸ºhttp://123.22.22.10/AA/

http://123.22.22.10/BB/ : ä¸ä¼š301ï¼Œ æ§åˆ¶å°1ä¸ªè¯·æ±‚ï¼Œæµè§ˆå™¨åœ°å€æ çš„åœ°å€ä¸å˜

http://123.22.22.10/BB : ä¸ä¼š301ï¼Œ æ§åˆ¶å°1ä¸ªè¯·æ±‚ï¼Œæµè§ˆå™¨åœ°å€æ çš„åœ°å€ä¸å˜

### å°æ€»ç»“ï¼štry_filesæœ€åä¸€ä¸ªå‚æ•°

å¯¹äºtry_filesçš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œä¼šä½œä¸€ä¸ª*å†…éƒ¨*é‡å®šå‘/fallbackï¼Œè¿™ä¸ªå†…éƒ¨é‡å®šå‘å¯ä»¥çœ‹ä½œä¸€ä¸ªå†…éƒ¨å­è¯·æ±‚ï¼Œä¼šé‡æ–°è¢«nginxé…ç½®é‡æ–°matchä¸€éã€‚

ä¾‹å¦‚ï¼Œæ ¹æ®ä¸Šé¢4.2çš„nginxä¸­try_filesé…ç½®ï¼Œæœ€åä¸€ä¸ªå‚æ•°ï¼Œä¸æ˜¯æŸ¥æ‰¾/webApp/redirect.html?$query_stringæ–‡ä»¶ï¼Œè€Œæ˜¯ä¼šå‘èµ·ä¸€ä¸ªå†…éƒ¨å­httpè¯·æ±‚ï¼šhttp://123.22.22.10/redirect.html?$query_string, è¯¥å­è¯·æ±‚é‡æ–°è¯·æ±‚locationï¼Œè¿”å›/webApp/redirect.htmlæ–‡ä»¶ã€‚

# 8,  è®¿é—®http://ip/scc/imp/xxx

æŒ‰ç…§ä¸Šé¢çš„é…ç½®ï¼Œè®¿é—®http://120.27.215.50/scc/imp/xxxåœ°å€ï¼Œå‡å›è¢«try_filesæœ€åä¸€ä¸ªå‚æ•°é‡å®šå‘åˆ°http://120.27.215.50/redirect.html

å³ä½¿è®¿é—®jsæ–‡ä»¶ï¼Œä¹Ÿä¼šè¿”å›ä¸€ä¸ªhtmlæ–‡ä»¶ï¼›

å¦‚ä½•ä¿®æ”¹ï¼Ÿ

## ä¿®æ”¹1: rewrite

~~~nginx
    server {
        listen       80 default_server;
        server_name  _;
        root         /webApp;

        access_log               /webApp/access.log main;
        error_log                /webApp/error.log warn;

        rewrite /scc/imp/js /js break; # ä¿®æ”¹çš„åœ°æ–¹ï¼Œä¼šå¼•èµ·é‡å®šå‘ï¼Ÿè€Œä¸æ˜¯ç›´æ¥æ›¿æ¢ä¿®æ”¹$uri ?????(å¾…ç¡®è®¤)

        location / {
            root         /webApp;
            index index.html index.htm;
            try_files $uri $uri/ /redirect.html?$query_string;
        }

        #error_page 404 /404.html;
    }
~~~

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js

ç»“æœï¼šé‡å®šå‘ï¼Œæœ€ç»ˆå±•ç¤ºæ–‡ä»¶æ˜¯ /webApp/js/index.html

~~~bash
Request URL: http://120.27.215.50/scc/imp/js/app.js
Request Method: GET
Status Code: 301 Moved Permanently (from disk cache)

Location: http://120.27.215.50/js/   # rewriteåçš„åœ°å€
Server: nginx/1.14.1
~~~

## ä¿®æ”¹2: rewrite 

- ```nginx
  rewrite "^/scc/imp/(.*)$" /$1 break;
  ```

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js ï¼› è¿”å›/webApp/js/app.js

<<<<<<< HEAD
+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js/ â“â“â“
=======
+ http://120.27.215.50/scc/imp/js/app.js/  ï¼› è¿”å›/webApp/redirect.html
>>>>>>> b61aa0b28c34cd2b68913f29213a5dcb477c0329

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/css/app.cssï¼› è¿”å›/webApp/css/app.css

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/css/b.html ; è¿”å›/webApp/css/b.html

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/a.htmlï¼› è¿”å›/webApp/js/a.html

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/ï¼› è¿”å›/webApp/js/index.html â“â“â“

<<<<<<< HEAD
+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js   (æ³¨æ„ï¼Œç»“å°¾æ²¡æ–œæ )ï¼› è¿”å›ï¼šæ§åˆ¶å°å‘é€2ä¸ªè¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚è¢«é‡å®šå‘åˆ°http://120.27.215.50/js/ï¼Œ è€Œhttp://120.27.215.50/js/æœ€ç»ˆè¿”å›æ˜¯/webApp/js/index.html
=======
+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js  (æ³¨æ„ï¼Œç»“å°¾æ²¡æ–œæ )ï¼› è¿”å›ï¼šæ§åˆ¶å°å‘é€2ä¸ªè¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªè¯·æ±‚è¢«é‡å®šå‘åˆ°http://120.27.215.50/js/ï¼Œ è€Œhttp://120.27.215.50/js/æœ€ç»ˆè¿”å›æ˜¯/webApp/js/index.html
>>>>>>> b61aa0b28c34cd2b68913f29213a5dcb477c0329

  ï¼ˆ**æµè§ˆå™¨åœ°å€æ æœ€ç»ˆæ˜¾ç¤ºhttp://120.27.215.50/js/**ï¼‰

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/ï¼› è¿”å›/webApp/index.html

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/impï¼›ï¼ˆç»“å°¾æ²¡æ–œæ ï¼‰ ï¼Œè¿”å›/webApp/redirect.htmlï¼Œæµè§ˆå™¨åœ°å€æ åœ°å€ä¸å˜

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/BomList ï¼› è¿”å›/webApp/redirect.htmlï¼Œ æ— 301ï¼Œ1ä¸ªè¯·æ±‚ï¼›å€æ åœ°å€ä¸å˜

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/BomList/ ï¼› è¿”å›: åŒä¸Š = /webApp/redirect.html

+ è®¿é—®ï¼šï¼› è¿”å›

+ è®¿é—®ï¼šï¼› è¿”å›



# 9, proxy_passã€aliasæµ‹è¯•

**æœåŠ¡å™¨ç›®å½•**ï¼Œä¸å˜ï¼ŒåŒä¸Šï¼Œä¸ºï¼š

~~~
/webApp/
		index.html
		redirect.html
		
		js/
			a.html
			index.html
			app.js
			
	  css/
    	b.html
    	app.css
~~~

##  1, nginxä¿®æ”¹proxy_pass

/etc/nginx/conf.d/extra.conf

~~~nginx
server {
  listen       80 default_server;
  server_name  _;
  root         /webApp;
  access_log               /webApp/access.log main;
  error_log                /webApp/error.log warn;

	location /api {
	    proxy_pass http://127.0.0.1:80/;  # 1ï¼Œæœ‰uriã€æ›¿æ¢æ“ä½œ
      proxy_pass http://127.0.0.1:80;   # 2ï¼Œæ— uriã€è¿½åŠ æ“ä½œ
    
      proxy_pass https://www.baidu.com/;  # 3ï¼Œä¸ä¼šå‡ºç°æ­»å¾ªç¯
      proxy_pass https://www.baidu.com;   # 4ï¼Œ
	}
  
  location / {
    root  	   /webApp;
    index      index.html index.htm;
    try_files  $uri $uri/ /redirect.html?$query_string;
  }
}
~~~

### 1ï¼Œæœ‰uri

+ è®¿é—®ï¼šhttp://120.27.215.50/api      è¿”å›ï¼š/webApp/index.html

  è¯´æ˜ï¼š æ­¤å¤„çš„127.0.0.1æŒ‡å‘nginxæ‰€åœ¨çš„æœåŠ¡å™¨çš„ipåœ°å€ï¼›

  â€‹			http://120.27.215.50/api 	è¢«ä»£ç†åçš„åœ°å€æ˜¯ï¼š	http://127.0.0.1:80/

+ è®¿é—®ï¼š http://120.27.215.50/api/getName   è¿”å›ï¼š/webApp/redirect.html

  è¯´æ˜ï¼š http://120.27.215.50/api/getName 	è¢«ä»£ç†åçš„åœ°å€æ˜¯ï¼š	http://127.0.0.1:80/getName

### 2ï¼Œæ— uri

+ è®¿é—®ï¼šhttp://120.27.215.50/api      è¿”å›ï¼š504 Gateway Time-out

  è¯´æ˜ï¼š http://120.27.215.50/api 	è¢«ä»£ç†åçš„åœ°å€æ˜¯ï¼š	http://127.0.0.1:80/api = http://120.27.215.50/api   æ­»å¾ªç¯

+ è®¿é—®ï¼š http://120.27.215.50/api/getName   è¿”å›ï¼šåŒä¸Š

### 3ï¼Œä»£ç†åˆ°baidu

+ http://120.27.215.50/api  è¢«ä»£ç†åˆ°  https://www.baidu.com/ 1ä¸ªè¯·æ±‚ï¼Œåœ°å€æ åœ°å€ä¸å˜ï¼›

+ http://120.27.215.50/api/more    å‘é€3ä¸ªè¯·æ±‚ï¼Œ

  ç¬¬1ä¸ªè¯·æ±‚

  â€‹		Request URL: http://120.27.215.50/api/moreï¼Œ 

  â€‹		å“åº”ï¼š301 Moved Permanentlyï¼› Location: http://www.baidu.com/more/

  ç¬¬2ä¸ªè¯·æ±‚

  â€‹		Request URL: http://www.baidu.com/more/

  â€‹		å“åº”ï¼š307 Internal Redirectï¼› Location: https://www.baidu.com/more/

  ç¬¬3ä¸ªè¯·æ±‚

  â€‹		Request URL: https://www.baidu.com/more/

  â€‹		å“åº”ï¼š200 OKï¼›

  **åœ°å€æ åœ°å€æ”¹å˜ï¼Œä¸ºï¼šhttps://www.baidu.com/more/**

+ http://120.27.215.50/api/more/    å‘é€1ä¸ªè¯·æ±‚ï¼Œè¢«ä»£ç†åˆ°http(s?)://www.baidu.com/more/ åœ°å€æ åœ°å€ä¸å˜ï¼›



### 4ï¼Œ ä»£ç†åˆ°Baiduæ— uri

http://120.27.215.50/api/      proxy_pass https://www.baidu.com

ç»“æœæ˜¯ï¼š 404 Not Found         The requested URL /api/ was not found on this server.

å› ä¸ºï¼š ä»£ç†åçš„åœ°å€æ˜¯https://www.baidu.com/api/ è€Œç™¾åº¦çš„æœåŠ¡å™¨ä¸Šæ²¡æœ‰/api/ç›®å½•ï¼Œæ‰€ä»¥è¿”å›404ï¼›



##  2, nginxä¿®æ”¹alias

/etc/nginx/conf.d/extra.conf

~~~nginx
server {
  listen       80 default_server;
  server_name  _;
  root         /webApp;
  access_log               /webApp/access.log main;
  error_log                /webApp/error.log warn;

  # ä¿®æ”¹1
	location /scc/imp/ {
    	alias /;
	}
  
  location / {
    root  	   /webApp;
    index      index.html index.htm;
    try_files  $uri $uri/ /redirect.html?$query_string;
  }
}
~~~

### ä¿®æ”¹1

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js ç»“æœ 404

è®¿é—®ï¼š http://120.27.215.50/scc/imp/ ç»“æœ 403 Forbidden

### ä¿®æ”¹2

```nginx
    location /scc/imp/js/ {
        alias /js/;
    }
```
è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/  è¿”å›ï¼š/webApp/redirect.html

è®¿é—®ï¼š http://120.27.215.50/scc/imp/js/ ç»“æœ 404

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js ç»“æœ 404

### ä¿®æ”¹3

~~~nginx
	location /scc/imp/js/ {
    	alias /js/;
	   	index index.html index.htm;
      try_files $uri $uri/ /redirect.html?$query_string;
	}
~~~

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js   ç»“æœï¼š/webApp/redirect.html  â“â“â“â“â“â“â“

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/   ç»“æœï¼š /webApp/redirect.htmlâ“

è®¿é—®ï¼š http://120.27.215.50/scc/imp/js/a.html   ç»“æœï¼š  /webApp/redirect.htmlâ“

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/index.html   ç»“æœï¼š  /webApp/redirect.htmlâ“

### ä¿®æ”¹4

~~~nginx
	location /scc/imp/js/ {
    		alias      /js/;
		    root       /webApp;
		    index      index.html index.htm;
        try_files  $uri $uri/ /redirect.html?$query_string;
	}
~~~

systemctl start nginx: é‡å¯nginxå‘½ä»¤ï¼Œç›´æ¥æŠ¥é”™ï¼Œå¦‚ä¸‹ï¼›
Job for nginx.service failed because the control process exited with error code.
See "systemctl status nginx.service" and "journalctl -xe" for details.

**aliaså’Œrootä¸èƒ½åŒæ—¶å­˜åœ¨äºlocationä¸­**

# 10,  ç¤ºä¾‹1-rewriteå’Œproxy_passå…±ç”¨

~~~nginx
    server {
        listen       80 default_server;
        server_name  _;
        root         /webApp;

        access_log               /webApp/access.log main;
        error_log                /webApp/error.log warn;

        rewrite "^/scc/imp/(.*)$" /$1 break;

  			# D1: æ­¤å¤„å†™ä¸º/api/ ï¼Œæˆ–å†™ä¸º/apiï¼Œå…·ä½“è§ä¸‹æ–¹
        location /api/ {
                proxy_pass                      https://www.baidu.com/;
                proxy_set_header                X-Forwarded-For $remote_addr;
                proxy_set_header                X-Real-Ip $remote_addr;
        }
  
        location / {
            root         /webApp;
            index index.html index.htm;
            try_files $uri $uri/ /redirect.html?$query_string;
        }

        #error_page 404 /404.html;
    }

~~~

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/js/app.js è¿”å›ï¼š  /webApp/js/app.js

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/css/app.css  è¿”å›ï¼š /webApp/css/app.css

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/wawawa è¿”å›ï¼š  /webApp/redirect.html

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/ è¿”å›ï¼š  /webApp/index.html

è®¿é—®ï¼šhttp://120.27.215.50/api/ ä»£ç†è¿”å›ï¼šhttps://www.baidu.com/é¡µé¢å†…å®¹

***

**D1å¤„ï¼Œå†™ä¸ºlocation /api  { } æ—¶   **

è®¿é—®ï¼š http://120.27.215.50/scc/imp/api è¿”å›ï¼š404 The requested URL /api was not found on this server.â“â“â“

åŸå› *rewriteå’Œproxy_passåŒæ—¶ä½¿ç”¨å¼•èµ·çš„*ï¼Œè™½ç„¶å®˜æ–¹æ–‡æ¡£è¯´ï¼Œrewriteå’Œproxy_passåŒæ—¶å†™åœ¨ä¸€ä¸ªlocationå†…éƒ¨ï¼Œä¸¤è€…æ‰ä¼šæœ‰å¥‡æ€ªçš„è¡¨ç°ï¼Œä½†æ­¤æ¬¡å®è·µç»“æœè€ŒçŸ¥ï¼Œä¸å†™åœ¨ä¸€ä¸ªlocationå†…éƒ¨ï¼Œä¹Ÿä¼šäº§ç”Ÿå¥‡æ€ªçš„è¡¨ç°ï¼š

/scc/imp/api è¢«rewriteä¸º /apiï¼›  ç„¶å/apiè¢«ä»£ç† åˆ°proxy_pass    https://www.baidu.com/; **æ­¤æ—¶ï¼Œæ— è®ºproxy_pass urlä¸­æ˜¯å¦æœ‰uriï¼Œå‡è¢«æ— è§†ï¼Œéƒ½ä¼šä»…ä»…æ›¿æ¢æœåŠ¡å™¨åœ°å€è€Œå·²ï¼Œæˆä¸ºï¼š https://www.baidu.com/api

**D1å¤„ï¼Œå†™ä¸ºä¸‹é¢**

~~~nginx
        rewrite "^/scc/imp/(.*)$" /$1 break;
				location /api {
                proxy_pass https://www.baidu.com/less;
        }
~~~

+ è®¿é—®http://120.27.215.50/scc/imp/api/haha/ï¼Œ ç»“æœï¼šThe requested URL /api/haha/ was not found on this server.

  è¯´æ˜ï¼šproxy_pass urlä¸­çš„/lessè·¯å¾„ç¡®å®å®Œå…¨è¢«å¿½ç•¥äº†ã€‚

  å…ˆæ˜¯/scc/imp/api/haha/ è¢«rewriteä¸º/api/haha/ ï¼Œç„¶åè¢«ä»£ç†åˆ°https://www.baidu.com/api/haha/

  ***

+ è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/api ç»“æœThe requested URL /less/ was not found on this server.

  2ä¸ªè¯·æ±‚ï¼›åœ°å€æ åœ°å€å˜ä¸ºï¼šhttp://120.27.215.50/api/

  ç¬¬1ä¸ªè¯·æ±‚ï¼š 301 Moved Permanently    Location: http://120.27.215.50/api/

  ç¬¬2ä¸ªè¯·æ±‚ï¼š 404 Not Found   Request URL: http://120.27.215.50/api/      è¢«ä»£ç†åˆ°https://www.baidu.com/less/

**D1å¤„ï¼Œå†™ä¸ºlocation /api/ { }  æ—¶**

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/api ç»“æœï¼š

	+ 2ä¸ªè¯·æ±‚ï¼›
	+ ç¬¬ä¸€ä¸ªè¯·æ±‚ï¼šhttp://120.27.215.50/scc/imp/api 301 Moved Permanently ï¼Œå“åº”Location: http://120.27.215.50/api/
	+ åœ°å€æ åœ°å€æ”¹å˜ä¸ºï¼šhttp://120.27.215.50/api/

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/api/ ç»“æœï¼š404  The requested URL /api/ was not found on this server.

 **D1å¤„ï¼Œä¿®æ”¹ä¸ºä¸‹é¢æ—¶**

~~~nginx
        rewrite "^/scc/imp/(.*)$" /$1 break;

        location /api/ {
                proxy_pass https://www.baidu.com/api/;
        }
~~~

+ http://120.27.215.50/scc/imp/api/ ---ã€‹ 404 The requested URL /api/ was not found on this server.
+ http://120.27.215.50/scc/imp/api/getuser/ ---ã€‹ 404 The requested URL /api/getuser/ was not found on this server.
+ http://120.27.215.50/scc/imp/bom ---ã€‹/webApp/redirect.html
+ http://120.27.215.50/scc/imp/css/app.css  ---ã€‹/webApp/css/app.css
+ http://120.27.215.50/scc/imp/  ---ã€‹/webApp/index.html
+ http://120.27.215.50/scc/imp/js/app.js---ã€‹/webApp/js/app.js



# 11,  é…ç½®ç¤ºä¾‹2

```nginx
    server {
        listen       80 default_server;
        server_name  _;
        root         /webApp;

        access_log               /webApp/access.log main;
        error_log                /webApp/error.log warn;

        #rewrite "^/scc/imp/(.*)$" /$1 break;

        location /scc/imp/api/ {
                proxy_pass https://www.baidu.com/;
        }

        location /scc/imp/ {
                rewrite "^/scc/imp/(.*)$" /$1 last;
        }

        location / {
            root         /webApp;
            index index.html index.htm;
            try_files $uri $uri/ /redirect.html?$query_string;
        }

        #error_page 404 /404.html;
    }
```
è®¿é—®ï¼š http://120.27.215.50/scc/imp/api/ æ˜¾ç¤ºhttps://www.baidu.com/å†…å®¹

è®¿é—®ï¼š http://120.27.215.50/scc/imp/api/more/  æ˜¾ç¤ºhttps://www.baidu.com/more/ å†…å®¹ 

è®¿é—®ï¼šhttp://120.27.215.50/scc/imp/api/more  æ˜¾ç¤ºhttps://www.baidu.com/more/ å†…å®¹ ,3ä¸ªè¯·æ±‚ï¼Œ

â€‹	  ç¬¬1ä¸ªè¯·æ±‚ï¼šhttp://120.27.215.50/scc/imp/api/more 301 Moved Permanentlyï¼› Location: http://www.baidu.com/more/

â€‹      ç¬¬2ä¸ªè¯·æ±‚ï¼šhttp://www.baidu.com/more/ 307 Internal Redirectï¼› Location: https://www.baidu.com/more/

â€‹      ç¬¬3ä¸ªè¯·æ±‚ï¼šhttps://www.baidu.com/more/ 200 okï¼› 

â€‹		**åœ°å€æ åœ°å€æ”¹å˜ï¼šhttps://www.baidu.com/more/**



# é™„å½•1: 

/etc/nginx/nginx.confåŸå§‹å†…å®¹ï¼š

~~~nginx
user nginx;
worker_processes auto;
error_log /var/log/nginx/error.log;
pid /run/nginx.pid;

# Load dynamic modules. See /usr/share/doc/nginx/README.dynamic.
include /usr/share/nginx/modules/*.conf;

events {
    worker_connections 1024;
}

http {
    log_format  main  '$remote_addr - $remote_user [$time_local] "$request" '
                      '$status $body_bytes_sent "$http_referer" '
                      '"$http_user_agent" "$http_x_forwarded_for"';

    access_log  /var/log/nginx/access.log  main;

    sendfile            on;
    tcp_nopush          on;
    tcp_nodelay         on;
    keepalive_timeout   65;
    types_hash_max_size 2048;

    include             /etc/nginx/mime.types;
    default_type        application/octet-stream;

    # Load modular configuration files from the /etc/nginx/conf.d directory.
    # See http://nginx.org/en/docs/ngx_core_module.html#include
    # for more information.
    include /etc/nginx/conf.d/*.conf;

    server {
        listen       80 default_server;
        listen       [::]:80 default_server;
        server_name  _;
        root         /usr/share/nginx/html;

        # Load configuration files for the default server block.
        include /etc/nginx/default.d/*.conf;

        location / {
        }

        error_page 404 /404.html;
            location = /40x.html {
        }

        error_page 500 502 503 504 /50x.html;
            location = /50x.html {
        }
    }

# Settings for a TLS enabled server.
#
#    server {
#        listen       443 ssl http2 default_server;
#        listen       [::]:443 ssl http2 default_server;
#        server_name  _;
#        root         /usr/share/nginx/html;
#
#        ssl_certificate "/etc/pki/nginx/server.crt";
#        ssl_certificate_key "/etc/pki/nginx/private/server.key";
#        ssl_session_cache shared:SSL:1m;
#        ssl_session_timeout  10m;
#        ssl_ciphers PROFILE=SYSTEM;
#        ssl_prefer_server_ciphers on;
#
#        # Load configuration files for the default server block.
#        include /etc/nginx/default.d/*.conf;
#
#        location / {
#        }
#
#        error_page 404 /404.html;
#            location = /40x.html {
#        }
#
#        error_page 500 502 503 504 /50x.html;
#            location = /50x.html {
#        }
#    }

}
~~~

# é™„å½•2

linuxå¸¸ç”¨å‘½ä»¤

>
>
>vim filename : æ‰“å¼€æˆ–æ–°å»ºæ–‡ä»¶ï¼Œå¹¶å°†å…‰æ ‡ç½®äºç¬¬ä¸€è¡Œé¦–(vim /tmp/test.txt)
>
>touchçš„ä½œç”¨æ˜¯æ›´æ”¹ä¸€ä¸ªæ–‡ä»¶æˆ–ç›®å½•çš„æ—¶é—´ã€‚touch 2.txt å¦‚æœ2.txtä¸å­˜åœ¨ï¼Œåˆ™åˆ›å»ºç©ºæ–‡ä»¶2.txt
>
>echo â€œabcdâ€ > 3.txt å¯ä»¥ç›´æ¥åˆ›å»ºæ–‡ä»¶3.txtå¹¶å°†abcdå†™å…¥ã€‚
>
>mkdir å‘½ä»¤ï¼Œæ˜¯ make directories çš„ç¼©å†™ï¼Œç”¨äºåˆ›å»ºæ–°ç›®å½•ï¼Œæ­¤å‘½ä»¤æ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨ã€‚
>
>
>
>touch file1.txt åˆ›å»ºæ–‡ä»¶
>
>
>
>mvæˆ–renameå‘½ä»¤ï¼šé‡å‘½åæ–‡ä»¶æˆ–ç›®å½•
>
>mv A B    # å°†ç›®å½•Aé‡å‘½åä¸ºB
>
>mv /a /b/c     # å°†/aç›®å½•ç§»åŠ¨åˆ°/bä¸‹ï¼Œå¹¶é‡å‘½åä¸ºc
>
>
>
>rm -rf ç›®å½•åå­—  ï¼šåˆ é™¤
>
>-r å‘ä¸‹é€’å½’ï¼Œä¸ç®¡æœ‰å¤šå°‘çº§ç›®å½•ï¼Œä¸€å¹¶åˆ é™¤ã€‚
>
>-f ç›´æ¥å¼ºè¡Œåˆ é™¤ï¼Œæ²¡æœ‰ä»»ä½•æç¤ºã€‚
>
>

 [å¦‚ä½•åœ¨Linux ç³»ç»Ÿä¸­ä½¿ç”¨systemctl å‘½ä»¤ç®¡ç†Nginx æœåŠ¡](https://zhuanlan.zhihu.com/p/74146523)

>
>
>systemctl status nginx 
>
>systemctl stop nginx
>
>systemctl start nginx
>
>systemctl reload nginx	 # Restart Nginx
>
>systemctl restart nginx 	# Force Restart Nginx
>
>
>
>Activate the web console with: systemctl enable --now cockpit.socket



# é™„å½•3:  E212ï¼šæ— æ³•æ‰“å¼€å¹¶å†™å…¥æ–‡ä»¶

åœ¨ç¼–å†™é…ç½®æ–‡ä»¶æ—¶ï¼Œå¸¸å¸¸å¿˜è®°åˆ‡æ¢åˆ°rootç”¨æˆ·ï¼Œå¯¼è‡´æ–‡ä»¶ç¼–è¾‘å®Œæ¯•ï¼Œæ•²å…¥:wq é€€å‡ºä¿å­˜æ—¶ï¼Œå‡ºç° E212ï¼šæ— æ³•æ‰“å¼€å¹¶å†™å…¥æ–‡ä»¶ çš„é”™è¯¯æç¤ºã€‚è¿™æ˜¯ç”±äºåœ¨è¯¥ç›®å½•ä¸‹å½“å‰ç”¨æˆ·æ²¡æœ‰å†™æƒé™å¯¼è‡´ã€‚



# é™„å½•4: vim

**åˆ é™¤ä¸€è¡Œ**ï¼š åœ¨å‘½ä»¤æ¨¡å¼ä¸‹ï¼Œ dd











